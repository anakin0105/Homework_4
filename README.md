# Homework_4
Модуль 4: Объектно-ориентированное программирование
## Описание
Это учебный проект товары. Реализованы функции для чтения JSON-файла и Классы Product и Category

```plaintext
├── src/                    # Основные исходные файлы
│   ├──__init__.py
│   ├── Catigory_class.py   # Класс Category с атрибутом: название, описание, лист продуктов, 
│   │                         количество категорий, количество товаров.
│   ├── Product_class.py    # Класс Product с атрибутом: название, описание, цена, количество.
│   ├── utils.py            # Функция для чтения JSON-файла
├── tests/                  # Тесты проекта
├── main.py                 # Точка входа в приложение
├── poetry.lock             # Файл блокировки зависимостей
├── pyproject.toml          # Конфигурация проекта для Poetry
```
### Модули и функции
#### 1. Модуль Product_class.py
- **Класс**: `class Product`
  - **Описание**: Класс `Product` представляет продукт с атрибутами: название, описание, цена и количество. Используется для создания объектов, содержащих информацию о товаре.
  - **Параметры**:
    - `name: str` — Название продукта.
    - `description: str` — Описание продукта.
    - `price: float` — Цена продукта.
    - `quantity: int` — Количество продукта на складе.
  - **Возвращает**: Экземпляр класса `Product` с заданными атрибутами.


#### 2. Модуль Category_class.py
- **Класс**: `class Category`
  - **Описание**: Класс `Category` представляет категорию товаров с атрибутами: название, описание, список продуктов, а также счётчики общего количества категорий и продуктов. Используется для организации продуктов в категории и подсчёта их количества.
  - **Параметры**:
    - `name: str` — Название категории.
    - `description: str` — Описание категории.
    - `products: list` — Список объектов `Product`, входящих в категорию.
    - `category_count: int` — Статический атрибут, хранящий общее количество созданных категорий (увеличивается при создании экземпляра).
    - `product_count: int` — Статический атрибут, хранящий общее количество продуктов во всех категориях (увеличивается на длину списка `products` при создании экземпляра).
  - **Возвращает**: Экземпляр класса `Category` с заданными атрибутами и обновлёнными счётчиками категорий и продуктов.
 

#### 3. Модуль <имя_модуля>.py
- **Функция**: `read_json_file`
  - **Описание**: Читает данные из JSON-файла по указанному пути и возвращает список словарей с информацией о продуктах и категориях. Обрабатывает возможные ошибки, такие как отсутствие файла, некорректный JSON или пустой список, выводя соответствующие сообщения в консоль.
  - **Параметры**:
    - `path: str` — Путь к JSON-файлу, содержащему данные о продуктах и категориях.
  - **Возвращает**: Список словарей с данными из JSON-файла. Если файл не найден, содержит некорректные данные, пуст или не является списком, возвращает пустой список (`[]`) и выводит сообщение об ошибке в консоль.
  
## Выполненные задачи
Ниже перечислены все реализованные функциональности задания 14.2, включая дополнительные задания 3 и 4:

1. **Класс Product**:
 Атрибутыты**:
     - name (str): Название товара.
     - description (str): Описание товара.
     - __price (float, приватный): Цена товара, доступна только через геттер и сеттер.
     - quantity (int): Количество товара на складе.
 Методыды**:
     - __init__: Инициализирует товар с названием, описанием, ценой и количеством.
     - new_product (класс-метод): Создаёт товар из словаря с атрибутами.
     - price (геттер): Возвращает приватный атрибут __price.
     - price (сеттер, дополнительное задание 4): Обновляет цену с валидацией:
       - Запрещает нулевые или отрицательные цены с сообщением: "Цена не должна быть нулевая или отрицательная".
       - Запрашивает подтверждение (y/n) при понижении цены, отменяя изменение, если введено не y.

2. **Класс Category*Атрибутырибуты**:
     - name (str): Название категории.
     - description (str): Описание категории.
     - __products (list, приватный): Список объектов Product, доступен только через геттер.
     - category_count (класс-атрибут): Считает общее количество категорий.
     - product_count (класс-атрибут): Считает общее количество товаров во всех категорияМетодыМетоды**:
     - __init__: Инициализирует категорию с названием, описанием и списком товаров, обновляя category_count и product_count.
     - products (геттер): Возвращает строку с товарами в формате: "Название, X руб. Остаток: Y шт.\n".
     - add_product: Добавляет товар в __products с валидацией:
       - Проверяет, что входной параметр — объект Product, иначе вызывает ValueError.
 Дополнительное задание 3ание 3**: Проверяет дубликаты по имени:
         - При совпадении имени суммирует количество и выбирает более высокую цену (используя сеттер price).
         - Если дубликата нет, добавляет товар и увеличивает product_count.

3. **Тесты**:
   - Реализованы в tests/test_main.py с использованием pytest и фикстур.
   - Покрывают:
     - Инициализацию Product и Category.
     - Класс-метод new_product.
     - Геттер и сеттер price (повышение, понижение с подтверждением/отказом, невалидная цена).
     - Геттер products.
     - Метод add_product (уникальные товары, дубликаты с разными ценами, неверный тип).
     - Приватность атрибутов __price и __products.
   - Покрытие тестами >75%, проверено с помощью pytest-cov.
## Установка и запуск тестов
Установка зависимостей:
   `bash
   pip install pytest pytest-cov
pytest tests --cov=src --cov-report=html -v